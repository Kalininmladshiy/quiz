# quiz
Данный репозиторий представляет собой три скрипта, два из которых боты викторин для Телеграма и [VK](https://vk.com). Третий, это скрипт
для загрузки вопросов и ответов из .txt файла.

## bot.py
Это скрипт бота викторины в телеграм.

## vk_bot.py
Это скрипт бота викторины во Вконтакте.

## Установка:

### 1. Копируем содержимое проекта себе в рабочую директорию

### 2. Для хранения переменных окружения создаем файл .env:
```
touch .env
```
В проекте используются следующие переменные окружения:  
`TG_BOT_TOKEN` - Телеграм токен. Его вы получите при регистрации бота  
`VK_BOT_TOKEN` - VK токен бота. Его можно получить в настройках своего сообщества  
`ALLOWED_HOSTS` - Хост для Redis  
`DECODE_RESPONSES` - Установите значение True для Redis, если вы хотите получать декодированные строки, а не байты  
`PORT` - Порт для Redis  
`DB` -  Номер базы данных в Redis к которой вы хотите подключиться (по умолчанию 0)  

### 3. Разворачиваем внутри скопированного проекта виртуальное окружение:
```
python -m venv <название виртуального окружения>
```
```
source venv/bin/activate
```
### 4. Устанавливаем библиотеки:
```
pip install -r requirements.txt
```

### 5. Запускаем бота викторин в телеграм:
```
python bot.py
```
или бота викторин во Вконтакте:
```
python vk_bot.py
```

### Путь к .txt файлу с вопросами.
Вы можете указать свой путь к .txt файлам с вопросами. По умолчанию используется папка с названием questions_for_quiz,
расположенная в папке с проектом
```
python bot.py --path /home/folder1/folder2/questions_for_quiz
```

## Возможные ошибки при запуске.  
Проект использует технологию Redis для кэширования вопросов, поэтому при первом запуске вы можете 
столкнуться со следующе ошибкой `ConnectionRefusedError: [Errno 111] Connection refused`.  
Для ее решения проверьте подключение к Redis
```
redis-cli ping
```
Возможно для выполнения этой команды вас попросят выполнить следущую команду:
```
apt install redis-tools
```
Если после выполнения `redis-cli ping` вы получили ошибку `Could not connect to Redis at 127.0.0.1:6379: Connection refused`, выполните
следующую команду:
```
redis-server
```
Возможно для выполнения этой команды вас попросят выполнить следущую команду:
```
apt install redis-server
```
После этого перезапустите бота.

## main.py
Данный скрипт берет вопросы с ответами из .txt файлов, расположенных в дирекотрии questions_for_quiz.

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org/).
